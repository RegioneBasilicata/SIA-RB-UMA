<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="it" xml:lang="it">
<head>
<title>Regione TOBECONFIG - Utenti motori agricoli</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<meta name="author" content="TOBECONFIG" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="pragma" content="no-cache" />
<meta name="robots" content="index,nofollow" />
<meta name="description" content="Regione TOBECONFIG - Utenti motori agricoli" />
<meta name="keywords" content="TOBECONFIG,Utenti motori agricoli" />
<link href="/staticresources/css/srmuma/srmuma.css" rel="stylesheet" type="text/css" media="screen" id="skin" />
<script src="/staticresources/js/checktext.js"></script>
<script language="JavaScript" >

	function calcoloCarburante(idLavContoTerzi,maggiorazione,tipoUnitaMisura){
		var litriBase = Number(window.document.getElementById("litriBase"+idLavContoTerzi).value.replace(',','.'));
		var litriMedioImpasto = Number(window.document.getElementById("litriMedioImpasto"+idLavContoTerzi).value.replace(',','.'));
		var ettari = Number(window.document.getElementById("supOreStr"+idLavContoTerzi).value.replace(',','.'));
		var supOreCalcolata = window.document.getElementById("supOreCalcolata"+idLavContoTerzi).value.replace(',','.');
		var litriTerDeclivi = Number(window.document.getElementById("litriTerDeclivi"+idLavContoTerzi).value.replace(',','.'));
		/*se l'utente tenta di inserire un numero con la virgola 
			o con il punto non bisogna calcolare il carburante quindi faccio il replace del punto con la virgola in modo tale 
			che numeroEsecuzioni diventi NaN 
		*/
		var numeroEsecuzioni = Number(window.document.getElementById("numeroEsecuzioni"+idLavContoTerzi).value.replace('.',','));
		var cavalli = Number(window.document.getElementById("cavalli"+idLavContoTerzi).value);
		var coefficiente = Number(window.document.getElementById("coefficiente").value);
		var tipoCarburante = window.document.getElementById("tipoCarburante"+idLavContoTerzi).value;
		
		var gasolio = window.document.getElementById("gasolioStr"+idLavContoTerzi);
		var maxCarburante = window.document.getElementById("maxCarburante"+idLavContoTerzi);
		
		if(tipoCarburante != ''){
			tipoCarburante = Number(tipoCarburante);
			
		}
		if(tipoCarburante == 0 || isNaN(tipoCarburante)){
			//di default il tipoCarburante è gasolio
			tipoCarburante = 2;
		}
			
		
		
		var carburante = 0;
		var carburanteLimite = 0;
		if(tipoUnitaMisura == 'S'){
			carburante = litriBase  +litriMedioImpasto;
			if(maggiorazione == 'true'){
				carburante += litriTerDeclivi;
			}
			carburante *= ettari;
		}else if(tipoUnitaMisura == 'T'){
			carburante = ettari * cavalli * coefficiente;
		}
		else if(tipoUnitaMisura == 'P'  || tipoUnitaMisura == 'K'){
      carburante = ettari * litriBase;
    }else if(tipoUnitaMisura == 'M'){
    	carburante = ettari * (litriBase + litriMedioImpasto);
    }
		//alert('ettari '+ettari);
		//alert('cavalli '+cavalli);
		//alert('coefficiente '+coefficiente);
		//alert('numeroEsecuzioni '+numeroEsecuzioni);
		if(numeroEsecuzioni != null && numeroEsecuzioni != '')
			carburante = carburante * numeroEsecuzioni;
		
		//alert('carburante '+carburante);
		
		if(isNaN(carburante)) {
			carburante = "";
		}
		else
		{
			carburante = arrotondamento(carburante); 
		}
		//alert('supOreCalcolata '+supOreCalcolata);
		/*if(supOreCalcolata != ''){
			if(tipoUnitaMisura == 'S'){
				carburanteLimite = litriBase  +litriMedioImpasto;
				if(maggiorazione == 'true')
				{
					carburanteLimite += litriTerDeclivi;
				}
				carburanteLimite *= Number(supOreCalcolata);
			}else if(tipoUnitaMisura == 'T'){
				carburanteLimite = Number(supOreCalcolata) * cavalli * coefficiente;
			}
			if(numeroEsecuzioni != null && numeroEsecuzioni != ''){
				carburanteLimite = carburanteLimite * numeroEsecuzioni;
			}
			
			carburanteLimite = arrotondamento(carburanteLimite); 
			maxCarburante.value = carburanteLimite;
		}else */
		maxCarburante.value = carburante;
			
		gasolio.value = carburante;		
	}
	
	function arrotondamento (num){
		num = num + 0.9999;
		num = Math.abs(Math.floor(num));
		return num;
	}
</script>
$$messaggistica</head>
<body onLoad="$$err_error;">
<form  method="post" name="form1" action="../layout/modificaLavDaContoTerzi.htm">
  <!--    <input type="hidden" name="radiobutton" value="$$idSerra">  -->
  <!--    <input type="hidden" name="idSerra" value="$$idSerra">  -->
  <!--    <input type="hidden" name="idFormaSerra" value="$$idFormaSerra">  -->
  <input type="hidden" name="pageFrom" value="$$pageFrom">
  <div id="portalHeader">
  <noscript class="alert_js">
  <p>ATTENZIONE! Il browser in uso non supporta le applicazioni Javascript.<br />
    Per usufruire in maniera completa di alcuni servizi presenti in RuparTOBECONFIG,
    potrebbe essere necessario l&acute;utilizzo dei Javascript.</p>
  </noscript>
  <!--<div id="intestazione">-->
  <div class="row-fluid menupaprivati">
    <ul class="nav menu pull-right">
      <li class="active parent"> </li>
    </ul>
    <ul class="nav menu pull-right">
      <li class="parent"> </li>
    </ul>
    <ul class="nav menu menuTopSx pull-left">
      <li> </li>
      <li>  </li>
    </ul>
  </div>
  <div class="header">
    <h1>Regione TOBECONFIG</h1>
  </div>
</div>
  <div id="titoloEmenu">
    <h2> UMA - Utenti motori agricoli </h2>
    <p class="grigio"> utente: $$utente <span class="ente"> ente: $$ente</span></p>
  </div>
  <div id="corpo">
    <div id="navi"> <a href="../../layout/index.htm">utenti motori agricoli </a> &gt;
      ditta UMA &gt; Lavorazioni eseguite per Conto Terzi &gt; modifica</div>
    <!-- tabella a due colonne per il contenuto -->
    <table id="contenuto">
      <tr>
        <td class="elenco"><!-- cella che contiene i menu -->
          <div class="menu">
            <!-- @@blkRICERCA_DITTA -->
            <a href="../../anag/layout/ricercaAzienda.htm">Ricerca ditta UMA</a>
            <!-- @@blkRICERCA_DITTA -->
            <!-- @@blkAZIENDE_TITOLARE -->
            <a href="../../anag/layout/elencoAziendeRapLegale.htm">Elenco ditte</a>
            <!-- @@blkAZIENDE_TITOLARE -->
            <!-- @@blkVISUALIZZA_DATI_MACCHINA -->
            <a href="../../macchina/layout/ricercaMacchina.htm">Ricerca macchina</a>
            <!-- @@blkVISUALIZZA_DATI_MACCHINA -->
            <!-- @@blkNUOVA_DITTA -->
            <a href="../../ditta/layout/nuovaDittaUmaAnagrafica.htm">Nuova ditta UMA</a>
            <!-- @@blkNUOVA_DITTA -->
            <!-- @@blkSTAMPA_ELENCHI -->
            <a href="../../layout/stampaElenchi.htm">Stampa elenchi</a>
            <!-- @@blkSTAMPA_ELENCHI -->
            <!-- @@blkMenuDatiSistema -->
            <a href="../../layout/dati_sistema.htm">Dati di sistema</a>
            <!-- @@blkMenuDatiSistema -->
          </div>
          <div class="menu"> <span class="etichettamenu"><a href="../../anag/layout/dettaglioAzienda.htm">Ditta UMA </a></span>
            <div class="sottomenu"> <a href="elencoLavDaContoTerzi.htm" id="ocra">Lavorazioni da Conto Terzi</a> <span class="inattivo2">modifica</span></div>
          </div>
          <!-- @@blkMenuAssegnazione -->
          <div class="menu"> <span class="etichettamenu"><a href="../../domass/layout/assegnazioni.htm">Assegnazione carburante</a></span></div>
          <!-- @@blkMenuAssegnazione -->
          <!-- @@blkMenuBuoni -->
          <div class="menu"> <span class="etichettamenu"><a href="../../domass/layout/elencoBuoniEmessi.htm">Buoni di prelievo</a></span></div>
          <!-- @@blkMenuBuoni -->
          <!-- @@blkMenuMacchine -->
          <div class="menu"> <span class="etichettamenu"><a href="../../macchina/layout/elencoMacchine.htm">Macchine</a></span></div>
          <!-- @@blkMenuMacchine -->
        </td>
        <td><!-- cella di destra, contiene i "tabelloni"-->
          <p class="datiazienda">azienda selezionata </p>
          <p class="datiaziendaB">$$umaDittaCUAA - $$umaNomeAzienda</p>
          <p class="datiaziendaB">Ditta N. $$umaNumAzienda /$$umaTipoDitta</p>
          <p class="datiazienda"> provincia di competenza $$umaProvinciaDitta</p>
          <br>
          </p>
          <div class="scroll">
            <table class="dataCol">
              <tr>
                <th  rowspan="2">CUAA</th>
                <th  rowspan="2">Partita IVA</th>
                <th  rowspan="2">Denominazione</th>
                <th  rowspan="2">Uso del suolo</th>
                <th  rowspan="2">Lavorazione</th>
                <th  rowspan="2">Numero esecuzioni*</th>
                <th  rowspan="2">U.d.M.</th>
                <th  rowspan="2">Sup.(ha) / Ore / Peso (t) / Pot.(kw)</th>
                <th  rowspan="2">Consumo ammissibile (lt)</th>
                <th  rowspan="2">Consumo dichiarato (lt)*</th>
                <th  rowspan="2">Note</th>
                <!--  
					  <th  rowspan="2">Data inserimento</th>
					  <th  rowspan="2">Ultima modifica</th>
					  -->
              </tr>
              <tr> </tr>
              <input type="hidden" name="coefficiente" id="coefficiente" value="$$coefficiente">
              @@blkRecord
              <input type="hidden" name="litriBase$$idLavContoTerzi" id="litriBase$$idLavContoTerzi" value="$$litriBase">
              <input type="hidden" name="litriMedioImpasto$$idLavContoTerzi" id="litriMedioImpasto$$idLavContoTerzi" value="$$litriMedioImpasto">
              <input type="hidden" name="litriTerDeclivi$$idLavContoTerzi" id="litriTerDeclivi$$idLavContoTerzi" value="$$litriTerDeclivi">
              <input type="hidden" name="cavalli$$idLavContoTerzi" id="cavalli$$idLavContoTerzi" value="$$cavalli">
              <input type="hidden" name="tipoCarburante$$idLavContoTerzi" id="tipoCarburante$$idLavContoTerzi" value="$$tipoCarburante">
              <input type="hidden" name="supOreCalcolata$$idLavContoTerzi" id="supOreCalcolata$$idLavContoTerzi" value="$$supOreCalcolata">
              <input type="hidden" name="maxCarburante$$idLavContoTerzi" id="maxCarburante$$idLavContoTerzi" value="$$maxCarburante">
              <tr >
                <td>$$cuaa</td>
                <td>$$partitaIva</td>
                <td>$$denominazione</td>
                <td>$$usoDelSuolo</td>
                <td>$$lavorazione</td>
                <td><input type="text" name="esecuzioniStr$$idLavContoTerzi" id="numeroEsecuzioni$$idLavContoTerzi" size="2" value="$$esecuzioniStr" onKeyUp="calcoloCarburante('$$idLavContoTerzi','$$maggiorazione', '$$tipoUnitaMisura')" maxlength="4">
                  $$err_esecuzioniStr</td>
                <td>$$unitaDiMisura</td>
                <td><input type="text" name="supOreStr$$idLavContoTerzi" id="supOreStr$$idLavContoTerzi" size="15" value="$$supOreFatturaStr" onKeyUp="calcoloCarburante('$$idLavContoTerzi','$$maggiorazione','$$tipoUnitaMisura')">
                  $$err_supOreStr </td>
                <td><input type="text" name="gasolioStr$$idLavContoTerzi" id="gasolioStr$$idLavContoTerzi" readonly="readonly"  size="15"  maxlength="10" value="$$gasolioStr">
                </td>
                <td><input type="text" name="benzinaStr$$idLavContoTerzi" id="benzinaStr$$idLavContoTerzi" size="15" maxlength="10" value="$$benzinaStr">
                  $$err_benzinaStr </td>
                <td><textarea name="note$$idLavContoTerzi" cols="30">$$noteStr</textarea>
                  $$err_noteStr </td>
                <!--
					  <td>
						$$dataInizioValidita
					  </td>
					  <td>
						$$dataAggiornamentoStr ($$denomUtenteAgg - $$enteUtenteAgg)
					  </td>
					  -->
              </tr>
              @@blkRecord
              <tr>
                <td colspan="8" class="text-right"><strong>TOTALE:</strong>
                <td class="text-right"><strong>$$totaleGasolio</strong></td>
                <td class="text-right"><strong>$$totaleBenzina</strong></td>
                <td colspan="3">&nbsp;</td>
              </tr>
            </table>
          </div>
          I campi contrassegnati con asterisco sono obbligatori <br>
          <div class="bottone">
            <div class="left">
              <input type="submit" name="salva.x"  value="salva" >
            </div>
            <div class="right">
              <input type="submit" name="annulla.x" value="annulla">
            </div>
          </div>
         </td>
      </tr>
    </table>
    <!-- fine della tabella a due colonne -->
  </div>
  <div id="hiddenElement"></div>
</form>
<footer class="footer" role="contentinfo">
  <div class="container-fluid">
    <hr />
    <a name="footer"></a>
    <div class="custom footerCsi row-fluid">
      <div class="span3 col-sm-3"> <a href="http://www.regione.TOBECONFIG.it"><img alt="regione TOBECONFIG" src="/staticresources/assets/application/psrpratiche/css/images/TOBECONFIG.png" width="180px" /></a></div>
      <div class="span9 col-sm-9"> Regione TOBECONFIG - Partita Iva xxxx - Codice fiscale 80002950766 </div<
    </div>
  </div>
</footer>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7226140-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="it" xml:lang="it">
<head>
<title>Regione TOBECONFIG - Utenti motori agricoli</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<meta name="author" content="TOBECONFIG" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="pragma" content="no-cache" />
<meta name="robots" content="index,nofollow" />
<meta name="description" content="Regione TOBECONFIG - Utenti motori agricoli" />
<meta name="keywords" content="TOBECONFIG,Utenti motori agricoli" />
<link href="/staticresources/css/srmuma/srmuma.css" rel="stylesheet" type="text/css" media="screen" id="skin" />
<head>
<script src="/staticresources/js/checktext.js"></script>
<script language="JavaScript">

	function checkDati() {
		var idSocietaLeasing = document.form1.idSocietaLeasing.value;
		var idFormaPossesso = document.form1.idFormaPossesso.value;
		var ragioneSocialeBak = document.form1.ragioneSocialeBak.value;
		var partitaIVABak = document.form1.partitaIVABak.value;
		var ragioneSociale = document.form1.ragioneSociale.value;
		var partitaIVA = document.form1.partitaIVA.value;

		if((ragioneSociale || partitaIVABak) && idFormaPossesso && idFormaPossesso=='4' && !idSocietaLeasing){
			alert("Una volta inseriti i campi Partita Iva e/o Ragione Sociale della ditta di leasing e' obbligatorio eseguire una ricerca tramite il pulsante 'CERCA'");
			return false;
		}
		else if ((ragioneSociale != ragioneSocialeBak || partitaIVA != partitaIVABak) && ragioneSocialeBak != "" && partitaIVABak != "") {
			alert("La ragione sociale e/o la partita iva non corrispondono alla ditta di leasing selezionata tramite il pulsante 'CERCA'");
			return false;
		}
	}

	function findLeasing() {
		window
				.open(
						'elencoSocietaLeasing.htm?partitaIVA='
								+ document.form1.partitaIVA.value
								+ '&ragioneSociale='
								+ document.form1.ragioneSociale.value,
						'elencoSocieta',
						'scrollbars=yes,resizable=yes,width=800,height=600,status=no,location=no,toolbar=no');
	}

	function checkCombo()
  {
    var combo=document.form1.idFormaPossesso;
    var formaPossesso=combo[combo.selectedIndex].value;
    showCampiNascosti(formaPossesso);
  }
  
  
  function showCampiNascosti(formaPossesso)
  {
    var textScadenza=document.getElementById("textScadenza");
    var textDitta=document.getElementById("textDitta");
    //var textDatiAzienda=document.getElementById("textDatiAzienda");
    var sceltaScadenza=document.getElementById("sceltaScadenza");
    var sceltaDitta=document.getElementById("sceltaDitta");
    var datiAzienda=document.getElementById("datiAzienda");
    
    // Attenzione : se dataScarico e' valorizzata i campi del 'Possesso' verranno tutti disabilitati dalla View
    
    // --- formaPossesso = 'leasing'
    if (formaPossesso != "" && formaPossesso == "4") 
    {
      textScadenza.style.visibility="visible";
      textDitta.style.visibility="visible";
      sceltaScadenza.style.visibility="visible";
      sceltaDitta.style.visibility="visible";
      datiAzienda.style.display="";        
    }
    else
    {
      // --- formaPossesso = 'noleggio', 'comodato d'uso', 'prestiti d'uso'
      if(formaPossesso != "" && (formaPossesso == "3" || formaPossesso =="5" || formaPossesso =="6" ))
      {        
        clearData2();
        
        textScadenza.style.visibility="visible";
        sceltaScadenza.style.visibility="visible";                 
        textDitta.style.visibility="hidden";
        sceltaDitta.style.visibility="hidden";
        datiAzienda.style.display="none";
      } 
      else
      {
        clearData();
        textScadenza.style.visibility="hidden";
        textDitta.style.visibility="hidden";
        sceltaScadenza.style.visibility="hidden";
        sceltaDitta.style.visibility="hidden";
        datiAzienda.style.display="none";
      }
    }
  }
  
  
  function clearData()
  {
    var visPartitaIVA=document.getElementById("visPartitaIVA");
    var visDenominazione=document.getElementById("visDenominazione");
    var visIndirizzo=document.getElementById("visIndirizzo");
    var visRappresentanteLegale=document.getElementById("visRappresentanteLegale");
    visPartitaIVA.innerHTML="";
    visDenominazione.innerHTML="";
    visIndirizzo.innerHTML="";
    visRappresentanteLegale.innerHTML="";
    document.form1.partitaIVABak.value="";
    document.form1.ragioneSocialeBak.value="";
    document.form1.partitaIVA.value="";
    document.form1.ragioneSociale.value="";
    document.form1.idSocietaLeasing.value="";
    document.form1.dataScadenzaLeasing.value="";
  }
  
  function clearData2()
  {
    var visPartitaIVA=document.getElementById("visPartitaIVA");
    var visDenominazione=document.getElementById("visDenominazione");
    var visIndirizzo=document.getElementById("visIndirizzo");
    var visRappresentanteLegale=document.getElementById("visRappresentanteLegale");
    visPartitaIVA.innerHTML="";
    visDenominazione.innerHTML="";
    visIndirizzo.innerHTML="";
    visRappresentanteLegale.innerHTML="";
    document.form1.partitaIVABak.value="";
    document.form1.ragioneSocialeBak.value="";
    document.form1.partitaIVA.value="";
    document.form1.ragioneSociale.value="";
    document.form1.idSocietaLeasing.value="";      
  }
	

	function showTarga(show) 
	{
		var immatricolazione = document.getElementById("immatricolazione");
		
		var intrestazioneTipoTarga = document
				.getElementById("intestazioneTipoTarga");
		var tipoTarga = document.getElementById("tipoTarga");

		var numeroTarga1 = document.getElementById("numeroTarga1");
		var numeroTarga2 = document.getElementById("numeroTarga2");
		var numeroTarga3 = document.getElementById("numeroTarga3");
		var numeroTarga4 = document.getElementById("numeroTarga4");
		var numeroTarga5 = document.getElementById("numeroTarga5");
		var numeroTarga6 = document.getElementById("numeroTarga6");

		if (show) 
		{
		  immatricolazione.style.display = "";
			intrestazioneTipoTarga.style.visibility = "visible";
			tipoTarga.style.visibility = "visible";

			numeroTarga1.style.visibility = "visible";
			numeroTarga2.style.visibility = "visible";
			numeroTarga3.style.visibility = "visible";
			numeroTarga4.style.visibility = "visible";
			numeroTarga5.style.visibility = "visible";
			numeroTarga6.style.visibility = "visible";
		} 
		else 
		{
		 
		  immatricolazione.style.display = "none";
			  
			  
			intrestazioneTipoTarga.style.visibility = "hidden";
			tipoTarga.style.visibility = "hidden";

			numeroTarga1.style.visibility = "hidden";
			numeroTarga2.style.visibility = "hidden";
			numeroTarga3.style.visibility = "hidden";
			numeroTarga4.style.visibility = "hidden";
			numeroTarga5.style.visibility = "hidden";
			numeroTarga6.style.visibility = "hidden";
		}
	}

	function init(show) {
		
		showTarga(show);
		checkCombo();
		switchTarga('$$tipoAssTarga');
	}

	//Abilita la casella di testo per la targa
	function switchTarga(value) {
		
		if (value == "auto") 
		{
			document.form1.numeroTarga.value = '';
			document.form1.numeroTarga.disabled = true;
			document.form1.radioTarga[0].checked = true;
		}
		if (value == "spec") 
		{
			document.form1.numeroTarga.disabled = false;
			document.form1.radioTarga[1].checked = true;
		}
	}
</script>
$$messaggistica</head>
<body onLoad="init($$showTarga);$$err_error;">
<div id="portalHeader">
  <noscript class="alert_js">
  <p>ATTENZIONE! Il browser in uso non supporta le applicazioni Javascript.<br />
    Per usufruire in maniera completa di alcuni servizi presenti in RuparTOBECONFIG,
    potrebbe essere necessario l&acute;utilizzo dei Javascript.</p>
  </noscript>
  <!--<div id="intestazione">-->
  <div class="row-fluid menupaprivati">
    <ul class="nav menu pull-right">
      <li class="active parent"> </li>
    </ul>
    <ul class="nav menu pull-right">
      <li class="parent"> </li>
    </ul>
    <ul class="nav menu menuTopSx pull-left">
      <li> </li>
      <li>  </li>
    </ul>
  </div>
  <div class="header">
    <h1>Regione TOBECONFIG</h1>
  </div>
</div>
<div id="titoloEmenu">
  <h2> UMA - Utenti motori agricoli </h2>
  <p class="grigio"> utente: $$utente <span class="ente"> ente: $$ente</span></p>
</div>
<div id="corpo">
  <div id="navi"> <a href="../../layout/index.htm">utenti motori agricoli</a> &gt;
    macchine &gt; acquisto macchina nuova </div>
  <!-- tabella a due colonne per il contenuto -->
  <table id="contenuto">
    <tr>
      <td class="elenco"><!-- cella che contiene i menu -->
        <div class="menu">
          <!-- @@blkRICERCA_DITTA -->
          <a href="../../anag/layout/ricercaAzienda.htm">Ricerca
          ditta UMA</a>
          <!-- @@blkRICERCA_DITTA -->
          <!-- @@blkAZIENDE_TITOLARE -->
          <a href="../../anag/layout/elencoAziendeRapLegale.htm">Elenco
          ditte</a>
          <!-- @@blkAZIENDE_TITOLARE -->
          <!-- @@blkVISUALIZZA_DATI_MACCHINA -->
          <a href="../../macchina/layout/ricercaMacchina.htm">Ricerca
          macchina</a>
          <!-- @@blkVISUALIZZA_DATI_MACCHINA -->
          <!-- @@blkNUOVA_DITTA -->
          <a href="../../ditta/layout/nuovaDittaUmaAnagrafica.htm">Nuova
          ditta UMA</a>
          <!-- @@blkNUOVA_DITTA -->
          <!-- @@blkSTAMPA_ELENCHI -->
          <a href="../../layout/stampaElenchi.htm">Stampa elenchi</a>
          <!-- @@blkSTAMPA_ELENCHI -->
          <!-- @@blkMenuDatiSistema -->
          <a href="../../layout/dati_sistema.htm">Dati di sistema</a>
          <!-- @@blkMenuDatiSistema -->
        </div>
        <!--						 @@blkMenuDittaUMA -->
        <div class="menu"> <span class="etichettamenu"><a
												href="../../anag/layout/dettaglioAzienda.htm">Ditta UMA</a></span> </div>
        <!--						 @@blkMenuDittaUMA -->
        <!-- @@blkMenuAssegnazione -->
        <div class="menu"> <span class="etichettamenu"><a
												href="../../domass/layout/assegnazioni.htm">Assegnazione
          carburante</a></span> </div>
        <!--						 @@blkMenuAssegnazione -->
        <!-- @@blkMenuBuoni -->
        <div class="menu"> <span class="etichettamenu"><a
												href="../../domass/layout/elencoBuoniEmessi.htm">Buoni
          di prelievo</a></span> </div>
        <!--						 @@blkMenuBuoni -->
        <!-- @@blkMenuMacchine -->
        <div class="menu"> <span class="etichettamenu"><a
												href="../../macchina/layout/elencoMacchine.htm">Macchine</a></span>
          <!-- @@blkVISUALIZZA_MACCHINA_DITTA -->
          <span class=inattivo>acquisto macchina nuova</span>
          <!-- @@blkVISUALIZZA_MACCHINA_DITTA -->
        </div>
        <!-- @@blkMenuMacchine -->
      </td>
      <td><!-- cella di destra, contiene i "tabelloni"-->
        <p class="datiazienda">azienda selezionata</p>
        <p class="datiaziendaB">$$umaDittaCUAA - $$umaNomeAzienda</p>
        <p class="datiaziendaB">Ditta N. $$umaNumAzienda
          /$$umaTipoDitta</p>
        <p class="datiazienda">provincia di competenza
          $$umaProvinciaDitta</p>
        <form name="form1" method="post" action="macchinaNuovaUtilizzoCasoR-ASM.htm">
        
          <input type="hidden" name="idSocietaLeasing" value="$$idAziendaLeasing">
          <input type="hidden"	name="partitaIVABak" value="$$partitaIVA">
          <input type="hidden" name="ragioneSocialeBak"	value="$$ragioneSociale">
          <div class="tab">
            <p class="etichette tabAttivo">Genere</p>
            <p class="etichette">Caratteristiche - tecniche</p>
            <p class="etichette">Immatricolazione/Utilizzo</p>
          </div>
          <table class="data">
            <col width="30%" />
            <col width="70%" />
            <tr>
              <th>Genere</th>
              <td>$$descGenereMacchina</td>
            </tr>
            <tr>
              <th>Categoria</th>
              <td>$$descCategoria</td>
            </tr>
            <tr>
              <th>Marca</th>
              <td>$$marca</td>
            </tr>
            <tr>
              <th>Tipo</th>
              <td>$$tipoMacchina</td>
            </tr>
          </table>
          <div id="immatricolazione">
            <h3>Immatricolazione:</h3>
            <table class="data">
              <col width="30%" />
              <col width="70%" />
              <tr>
                <th><div id="intestazioneTipoTarga">Tipo targa *</div></th>
                <td><div id="tipoTarga">$$tipoTarga</div></td>
              </tr>
              <tr>
                <th><div id="numeroTarga1">Numero targa *</div></th>
                <td><div id="numeroTarga2">
                    <input type="radio" name="radioTarga" value="auto"
																	onClick="switchTarga('auto')" $$chkTarga1>
                    Assegnata
                    Automaticamente </div></td>
              </tr>
              <tr>
                <th><div id="numeroTarga3">&nbsp;</div></th>
                <td><div id="numeroTarga4">
                    <input type="radio" name="radioTarga" value="spec"
																	onClick="switchTarga('spec')" $$chkTarga2 >
                    Macchina
                    gi&agrave; dotata di numero targa
                    <input
																	name="numeroTarga" value="$$numeroTarga" type="text"
																	id="numeroTarga" >
                    $$err_numeroTarga </div></td>
              </tr>
              <tr>
                <th><div id="numeroTarga5">Data prima immatricolazione *</div></th>
                <td><div id="numeroTarga6">
                    <input type="text" name="dataPrimaImmatricolazione"
	                               value="$$dataPrimaImmatricolazione" size="12">
                    $$err_dataPrimaImmatricolazione </div></td>
              </tr>
            </table>
          </div>
          <h3>Utilizzo:</h3>
          <table class="data">
            <col width="30%" />
            <col width="70%" />
            <tr>
              <th>Forma possesso*</th>
              <td><select name="idFormaPossesso"
														onChange="checkCombo()" class="lista">
                  
															@@blkTipoFormaPossesso
															
                  <option value="$$idFormaPossesso" $$selected>$$descrizione</option>
                  
															@@blkTipoFormaPossesso
													
                </select>
                $$err_idFormaPossesso</td>
            </tr>
            <tr>
              <th>Data carico *</th>
              <td><input type="text" name="dataCarico"
														value="$$dataCarico" size="12">
                $$err_dataCarico</td>
            </tr>
            <tr>
              <th> <div id="textScadenza" >Data
                  scadenza contratto</div></th>
              <td><div id="sceltaScadenza" >
                  <input type="text" name="dataScadenzaLeasing"
																value="$$dataScadenzaLeasing" size="12">
                  $$err_dataScadenzaLeasing </div></td>
            </tr>
            <tr>
              <th> <div id="textDitta" >Ditta
                  di leasing o noleggio</div></th>
              <td><div id="sceltaDitta"> <strong>Partita I.V.A.</strong>
                  <input type="text" name="partitaIVA" value="$$partitaIVA" maxlength="11" class="med"><br />
<br />

                 <strong> Ragione sociale</strong>
                  <input type="text" name="ragioneSociale" value="$$ragioneSociale" class="med">
                  $$err_idSocietaLeasing <a href="javascript: pop('elencoSocietaLeasing.htm');"></a> <a href="javascript: findLeasing();"
																		class="pulsante">cerca</a> </div></td>
            </tr>
          </table>
          <br>
          <div id="datiAzienda">
            <h3>Ditta locataria selezionata</h3>
            <table class="data" $$dittaLocataria>
              <col width="30%" />
              <col width="70%" />
              <tr>
                <th>Partita I.V.A.</th>
                <td id="visPartitaIVA" width="304">$$partitaIVA</td>
              </tr>
              <tr>
                <th>Ragione sociale</th>
                <td id="visDenominazione">$$denominazione</td>
              </tr>
              <tr>
                <th>Indirizzo</th>
                <td id="visIndirizzo">$$sedelegIndirizzo $$descComune</td>
              </tr>
              <tr>
                <th>Rappresentante legale</th>
                <td id="visRappresentanteLegale">$$rappresentanteLegale</td>
              </tr>
            </table>
          </div>
          <br>
          <div class="bottone">
            <div  class="left">
              <input type="submit" name="indietroUtilizzo"
																value="indietro">
            </div>
            <div class="right">
              <input type="submit" name="salva" value="salva"
																onClick="return checkDati()">
            </div>
          </div>
        </form></td>
    </tr>
    </tbody>
    
  </table>
  <!-- fine della tabella a due colonne -->
</div>
<footer class="footer" role="contentinfo">
  <div class="container-fluid">
    <hr />
    <a name="footer"></a>
    <div class="custom footerCsi row-fluid">
      <div class="span3 col-sm-3"> <a href="http://www.regione.TOBECONFIG.it"><img alt="regione TOBECONFIG" src="/staticresources/assets/application/psrpratiche/css/images/TOBECONFIG.png" width="180px" /></a></div>
      <div class="span9 col-sm-9"> Regione TOBECONFIG - Partita Iva xxxx - Codice fiscale 80002950766 </div<
    </div>
  </div>
</footer>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7226140-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
